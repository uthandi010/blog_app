{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  key: 0,\n  class: \"blogpost-details\"\n};\nconst _hoisted_2 = [\"src\", \"alt\"];\nconst _hoisted_3 = {\n  class: \"blog-content\"\n};\nconst _hoisted_4 = {\n  class: \"blog-title\"\n};\nconst _hoisted_5 = {\n  class: \"blog-author\"\n};\nconst _hoisted_6 = {\n  class: \"blog-description\"\n};\nconst _hoisted_7 = {\n  class: \"buttons\"\n};\nconst _hoisted_8 = {\n  id: \"comments\"\n};\nconst _hoisted_9 = {\n  key: 0\n};\nconst _hoisted_10 = [\"onClick\"];\nconst _hoisted_11 = [\"onClick\"];\nconst _hoisted_12 = {\n  key: 0\n};\nconst _hoisted_13 = [\"onClick\"];\nconst _hoisted_14 = [\"onClick\"];\nconst _hoisted_15 = [\"onSubmit\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return Object.keys($data.blogPost).length !== 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"img\", {\n    src: $data.blogPost.image_url,\n    alt: $data.blogPost.post.title,\n    class: \"blog-image\"\n  }, null, 8 /* PROPS */, _hoisted_2), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"h3\", _hoisted_4, _toDisplayString($data.blogPost.post.title), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_5, \"By: \" + _toDisplayString($data.blogPost.user.firstname) + \" \" + _toDisplayString($data.blogPost.user.lastname), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_6, _toDisplayString($data.blogPost.post.description), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_7, [_createVNode(_component_router_link, {\n    to: `/blogpost/edit/${$data.blogPost.post.id}`,\n    class: \"nav-button auth-button\"\n  }, {\n    default: _withCtx(() => _cache[4] || (_cache[4] = [_createTextVNode(\"Edit\")])),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"to\"]), _createElementVNode(\"button\", {\n    class: \"nav-button auth-button\",\n    onClick: _cache[0] || (_cache[0] = (...args) => _ctx.deletePost && _ctx.deletePost(...args))\n  }, \"Delete\"), _createVNode(_component_router_link, {\n    to: \"/blogpost\",\n    class: \"nav-button auth-button\"\n  }, {\n    default: _withCtx(() => _cache[5] || (_cache[5] = [_createTextVNode(\"Back\")])),\n    _: 1 /* STABLE */\n  })]), _createElementVNode(\"div\", _hoisted_8, [_cache[8] || (_cache[8] = _createElementVNode(\"h2\", null, \"Comments\", -1 /* HOISTED */)), _createCommentVNode(\" Add Comment Form \"), _createElementVNode(\"form\", {\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers((...args) => $options.addComment && $options.addComment(...args), [\"prevent\"])),\n    class: \"add-comment-form\"\n  }, [_withDirectives(_createElementVNode(\"textarea\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.newComment = $event),\n    placeholder: \"Write a comment...\",\n    class: \"form-control\",\n    rows: \"2\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.newComment]]), _cache[6] || (_cache[6] = _createElementVNode(\"button\", {\n    type: \"submit\",\n    class: \"btn btn-primary btn-sm\"\n  }, \"Add Comment\", -1 /* HOISTED */))], 32 /* NEED_HYDRATION */), _createCommentVNode(\" Comments and Replies \"), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.comments, comment => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: comment.id,\n      class: \"comment\"\n    }, [_createElementVNode(\"p\", null, [_createElementVNode(\"strong\", null, _toDisplayString(comment.user.firstname) + \":\", 1 /* TEXT */), _createTextVNode(\" \" + _toDisplayString(comment.body), 1 /* TEXT */)]), _createCommentVNode(\" Comment Actions \"), $options.isEditable(comment) ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [_createElementVNode(\"button\", {\n      onClick: $event => _ctx.editComment(comment),\n      class: \"btn btn-secondary btn-sm\"\n    }, \"Edit\", 8 /* PROPS */, _hoisted_10), _createElementVNode(\"button\", {\n      onClick: $event => $options.deleteComment(comment.id),\n      class: \"btn btn-danger btn-sm\"\n    }, \"Delete\", 8 /* PROPS */, _hoisted_11)])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Replies \"), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(comment.replies, reply => {\n      return _openBlock(), _createElementBlock(\"div\", {\n        key: reply.id,\n        class: \"reply\"\n      }, [_createElementVNode(\"p\", null, [_createElementVNode(\"strong\", null, _toDisplayString(reply.user.firstname) + \":\", 1 /* TEXT */), _createTextVNode(\" \" + _toDisplayString(reply.body), 1 /* TEXT */)]), $options.isEditable(reply) ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [_createElementVNode(\"button\", {\n        onClick: $event => _ctx.editComment(reply),\n        class: \"btn btn-secondary btn-sm\"\n      }, \"Edit\", 8 /* PROPS */, _hoisted_13), _createElementVNode(\"button\", {\n        onClick: $event => $options.deleteComment(reply.id),\n        class: \"btn btn-danger btn-sm\"\n      }, \"Delete\", 8 /* PROPS */, _hoisted_14)])) : _createCommentVNode(\"v-if\", true)]);\n    }), 128 /* KEYED_FRAGMENT */)), _createCommentVNode(\" Add Reply Form \"), _createElementVNode(\"form\", {\n      onSubmit: _withModifiers($event => $options.addReply(comment.id), [\"prevent\"]),\n      class: \"reply-form\"\n    }, [_withDirectives(_createElementVNode(\"textarea\", {\n      \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.replyContent = $event),\n      placeholder: \"Write a reply...\",\n      class: \"form-control\",\n      rows: \"1\",\n      required: \"\"\n    }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.replyContent]]), _cache[7] || (_cache[7] = _createElementVNode(\"button\", {\n      type: \"submit\",\n      class: \"btn btn-info btn-sm\"\n    }, \"Reply\", -1 /* HOISTED */))], 40 /* PROPS, NEED_HYDRATION */, _hoisted_15)]);\n  }), 128 /* KEYED_FRAGMENT */))])])])) : _createCommentVNode(\"v-if\", true);\n}","map":{"version":3,"names":["key","class","id","Object","keys","$data","blogPost","length","_createElementBlock","_hoisted_1","_createElementVNode","src","image_url","alt","post","title","_hoisted_2","_hoisted_3","_hoisted_4","_toDisplayString","_hoisted_5","user","firstname","lastname","_hoisted_6","description","_hoisted_7","_createVNode","_component_router_link","to","default","_withCtx","_cache","_createTextVNode","_","onClick","args","_ctx","deletePost","_hoisted_8","_createCommentVNode","onSubmit","_withModifiers","$options","addComment","$event","newComment","placeholder","rows","required","type","_Fragment","_renderList","comments","comment","body","isEditable","_hoisted_9","editComment","_hoisted_10","deleteComment","_hoisted_11","replies","reply","_hoisted_12","_hoisted_13","_hoisted_14","addReply","replyContent","_hoisted_15"],"sources":["/Users/francium/app/frontend/src/components/blogpost/ShowBlogpost.vue"],"sourcesContent":["<template>\n    <div class=\"blogpost-details\" v-if=\"Object.keys(blogPost).length !== 0\">\n        <img :src=\"blogPost.image_url\" :alt=\"blogPost.post.title\" class=\"blog-image\">\n        <div class=\"blog-content\">\n            <h3 class=\"blog-title\">{{ blogPost.post.title }}</h3>\n            <p class=\"blog-author\">By: {{ blogPost.user.firstname }} {{ blogPost.user.lastname }}</p>\n            <p class=\"blog-description\">{{ blogPost.post.description }}</p>\n\n            <div class=\"buttons\">\n                <router-link :to=\"`/blogpost/edit/${blogPost.post.id}`\" class=\"nav-button auth-button\">Edit</router-link>\n                <button class=\"nav-button auth-button\" @click=\"deletePost\">Delete</button>\n                <router-link to=\"/blogpost\" class=\"nav-button auth-button\">Back</router-link>\n            </div>\n\n            <div id=\"comments\">\n                <h2>Comments</h2>\n\n                <!-- Add Comment Form -->\n                <form @submit.prevent=\"addComment\" class=\"add-comment-form\">\n                    <textarea\n                        v-model=\"newComment\"\n                        placeholder=\"Write a comment...\"\n                        class=\"form-control\"\n                        rows=\"2\"\n                        required\n                    ></textarea>\n                    <button type=\"submit\" class=\"btn btn-primary btn-sm\">Add Comment</button>\n                </form>\n\n                <!-- Comments and Replies -->\n                <div v-for=\"comment in comments\" :key=\"comment.id\" class=\"comment\">\n                    <p>\n                        <strong>{{ comment.user.firstname }}:</strong> {{ comment.body }}\n                    </p>\n\n                    <!-- Comment Actions -->\n                    <div v-if=\"isEditable(comment)\">\n                        <button @click=\"editComment(comment)\" class=\"btn btn-secondary btn-sm\">Edit</button>\n                        <button @click=\"deleteComment(comment.id)\" class=\"btn btn-danger btn-sm\">Delete</button>\n                    </div>\n\n                    <!-- Replies -->\n                    <div v-for=\"reply in comment.replies\" :key=\"reply.id\" class=\"reply\">\n                        <p>\n                            <strong>{{ reply.user.firstname }}:</strong> {{ reply.body }}\n                        </p>\n                        <div v-if=\"isEditable(reply)\">\n                            <button @click=\"editComment(reply)\" class=\"btn btn-secondary btn-sm\">Edit</button>\n                            <button @click=\"deleteComment(reply.id)\" class=\"btn btn-danger btn-sm\">Delete</button>\n                        </div>\n                    </div>\n\n                    <!-- Add Reply Form -->\n                    <form @submit.prevent=\"addReply(comment.id)\" class=\"reply-form\">\n                        <textarea\n                            v-model=\"replyContent\"\n                            placeholder=\"Write a reply...\"\n                            class=\"form-control\"\n                            rows=\"1\"\n                            required\n                        ></textarea>\n                        <button type=\"submit\" class=\"btn btn-info btn-sm\">Reply</button>\n                    </form>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport { mapGetters } from 'vuex';\n\nexport default {\n    name: 'ShowBlogpost',\n    data() {\n        return {\n            blogPost: {},\n            comments: [],\n            newComment: '',\n            replyContent: '',\n        };\n    },\n    computed: {\n        ...mapGetters('auth', ['getUser']),\n        userToken() {\n            return this.getUser.user_token;\n        },\n        user() {\n            return this.getUser.current_user;\n        },\n    },\n    created() {\n        this.fetchBlogPost();\n    },\n    methods: {\n        async fetchBlogPost() {\n            try {\n                const response = await axios.get(`http://127.0.0.1:3000/api/v1/blog_posts/${this.$route.params.id}`, {\n                    headers: { Authorization: `Bearer ${this.userToken}` },\n                });\n                this.blogPost = response.data;\n                this.comments = response.data.comments;\n            } catch (error) {\n                console.error('Error fetching blog post:', error);\n            }\n        },\n        async addComment() {\n            try {\n                const response = await axios.post(\n                    'http://127.0.0.1:3000/api/v1/comments',\n                    {\n                        body: this.newComment,\n                        blog_post_id: this.blogPost.post.id,\n                    },\n                    { headers: { Authorization: `Bearer ${this.userToken}` } }\n                );\n                this.comments.push(response.data);\n                this.newComment = '';\n            } catch (error) {\n                console.error('Error adding comment:', error);\n            }\n        },\n        async addReply(parentId) {\n            try {\n                const response = await axios.post(\n                    'http://127.0.0.1:3000/api/v1/comments',\n                    {\n                        body: this.replyContent,\n                        parent_id: parentId,\n                        blog_post_id: this.blogPost.post.id,\n                    },\n                    { headers: { Authorization: `Bearer ${this.userToken}` } }\n                );\n                const parentComment = this.comments.find((comment) => comment.id === parentId);\n                parentComment.replies.push(response.data);\n                this.replyContent = '';\n            } catch (error) {\n                console.error('Error adding reply:', error);\n            }\n        },\n        async deleteComment(commentId) {\n            try {\n                await axios.delete(`http://127.0.0.1:3000/api/v1/comments/${commentId}`, {\n                    headers: { Authorization: `Bearer ${this.userToken}` },\n                });\n                this.comments = this.comments.filter((comment) => comment.id !== commentId);\n            } catch (error) {\n                console.error('Error deleting comment:', error);\n            }\n        },\n        isEditable(item) {\n            return item.user_id === this.user.id;\n        },\n    },\n};\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
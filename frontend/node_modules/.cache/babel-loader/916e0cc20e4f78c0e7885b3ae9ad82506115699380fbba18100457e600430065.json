{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport { mapGetters, mapActions } from 'vuex';\nexport default {\n  data() {\n    return {\n      title: '',\n      description: '',\n      image: null,\n      errors: [],\n      currentImageUrl: ''\n    };\n  },\n  computed: {\n    ...mapGetters('blog', ['isEdit']),\n    ...mapGetters('auth', ['getUser']),\n    userToken() {\n      return this.getUser.user_token;\n    }\n  },\n  async created() {\n    const postId = this.$route.params.id;\n    if (postId) {\n      this.isEdit = true;\n      await this.getBlogPost(postId);\n    }\n  },\n  methods: {\n    ...mapActions('blog', ['setIsEdit']),\n    handleFileUpload(event) {\n      this.image = event.target.files[0];\n    },\n    async getBlogPost(id) {\n      try {\n        const response = await axios.get(`http://127.0.0.1:3000/api/v1/blog_posts/${id}`, {\n          headers: {\n            'Authorization': `Bearer ${this.userToken}`\n          }\n        });\n        const post = response.data.post;\n        this.title = post.title;\n        this.description = post.description;\n        this.currentImageUrl = post.image_url;\n      } catch (error) {\n        this.errors.push('Failed to fetch the blog post.');\n      }\n    },\n    async submitForm() {\n      this.errors = [];\n      if (!this.isEdit && (!this.image || this.image.size < 2 * 1024 * 1024 || this.image.size > 8 * 1024 * 1024)) {\n        this.errors.push('Image must be a JPEG and between 2MB and 8MB.');\n        return;\n      }\n      const formData = new FormData();\n      formData.append('blog_post[title]', this.title);\n      formData.append('blog_post[description]', this.description);\n      if (!this.isEdit && this.image) formData.append('blog_post[image]', this.image);\n      try {\n        const url = this.isEdit ? `http://127.0.0.1:3000/api/v1/blog_posts/${this.$route.params.id}` : 'http://127.0.0.1:3000/api/v1/blog_posts';\n        const method = this.isEdit ? 'put' : 'post';\n        const response = await axios({\n          method,\n          url,\n          data: formData,\n          headers: {\n            'Content-Type': 'multipart/form-data',\n            'Authorization': `Bearer ${this.userToken}`\n          }\n        });\n        console.log(`${this.isEdit ? 'Updated' : 'Created'} blog post:`, response);\n        this.$router.push('/blog-posts');\n      } catch (error) {\n        this.errors.push(`Failed to ${this.isEdit ? 'update' : 'create'} blog post.`);\n      }\n    },\n    async created() {\n      const postId = this.$route.params.id;\n      if (postId) {\n        await this.setIsEdit(true); // Set isEdit in Vuex\n        await this.getBlogPost(postId);\n      } else {\n        await this.setIsEdit(false); // Set isEdit to false for a new post\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","mapGetters","mapActions","data","title","description","image","errors","currentImageUrl","computed","userToken","getUser","user_token","created","postId","$route","params","id","isEdit","getBlogPost","methods","handleFileUpload","event","target","files","response","get","headers","post","image_url","error","push","submitForm","size","formData","FormData","append","url","method","console","log","$router","setIsEdit"],"sources":["/Users/francium/app/frontend/src/components/blogpost/NewBlogpost.vue"],"sourcesContent":["<template>\n    <div class=\"container\">\n        <h1>{{ isEdit ? 'Edit Blog Post' : 'New Blog Post' }}</h1>\n        <div v-if=\"errors.length\">\n            <h3 class=\"text-danger\">\n                {{ errors.join(', ') }}\n            </h3>\n        </div>\n        <form @submit.prevent=\"submitForm\">\n            <div>\n                <label for=\"title\">Title</label>\n                <input type=\"text\" v-model=\"title\" required />\n            </div><br>\n            <div>\n                <label for=\"description\">Description</label>\n                <textarea v-model=\"description\" required></textarea>\n            </div><br>\n            <div >\n                <label for=\"image\">Upload Image (JPEG, 2MB-8MB)</label>\n                <input type=\"file\" @change=\"handleFileUpload\" accept=\"image/jpeg\" class=\"form-control\" />\n            </div><br>\n            <div v-if=\"isEdit\">\n                <p><strong>Current Image:</strong></p>\n                <img :src=\"currentImageUrl\" alt=\"Current Image\" class=\"img-thumbnail\" style=\"max-width: 300px;\" />\n            </div><br>\n            <div>\n                <button type=\"submit\">{{ isEdit ? 'Update Blog Post' : 'Create Blog Post' }}</button>\n            </div>\n            <router-link to=\"/\" class=\"btn btn-secondary\">Back to Blog Posts</router-link>\n        </form>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport { mapGetters, mapActions } from 'vuex';\n\nexport default {\n    data() {\n        return {\n            title: '',\n            description: '',\n            image: null,\n            errors: [],\n            currentImageUrl: '', \n        };\n    },\n    computed: {\n        ...mapGetters('blog', ['isEdit']),\n        ...mapGetters('auth', ['getUser']),\n        userToken() {\n            return this.getUser.user_token;\n        },\n    },\n    async created() {\n        const postId = this.$route.params.id;\n        if (postId) {\n            this.isEdit = true;\n            await this.getBlogPost(postId);\n        }\n    },\n    methods: {\n        ...mapActions('blog', ['setIsEdit']),\n        handleFileUpload(event) {\n            this.image = event.target.files[0];\n        },\n        async getBlogPost(id) {\n            try {\n                const response = await axios.get(`http://127.0.0.1:3000/api/v1/blog_posts/${id}`, {\n                    headers: {\n                        'Authorization': `Bearer ${this.userToken}`\n                    }\n                });\n                const post = response.data.post;\n                this.title = post.title;\n                this.description = post.description;\n                this.currentImageUrl = post.image_url; \n            } catch (error) {\n                this.errors.push('Failed to fetch the blog post.');\n            }\n        },\n        async submitForm() {\n            this.errors = [];\n            if (!this.isEdit && (!this.image || this.image.size < 2 * 1024 * 1024 || this.image.size > 8 * 1024 * 1024)) {\n                this.errors.push('Image must be a JPEG and between 2MB and 8MB.');\n                return;\n            }\n\n            const formData = new FormData();\n            formData.append('blog_post[title]', this.title);\n            formData.append('blog_post[description]', this.description);\n            if (!this.isEdit && this.image) formData.append('blog_post[image]', this.image);\n\n            try {\n                const url = this.isEdit\n                    ? `http://127.0.0.1:3000/api/v1/blog_posts/${this.$route.params.id}`\n                    : 'http://127.0.0.1:3000/api/v1/blog_posts';\n\n                const method = this.isEdit ? 'put' : 'post';\n\n                const response = await axios({\n                    method,\n                    url,\n                    data: formData,\n                    headers: {\n                        'Content-Type': 'multipart/form-data',\n                        'Authorization': `Bearer ${this.userToken}`\n                    }\n                });\n\n                console.log(`${this.isEdit ? 'Updated' : 'Created'} blog post:`, response);\n                this.$router.push('/blog-posts');\n            } catch (error) {\n                this.errors.push(`Failed to ${this.isEdit ? 'update' : 'create'} blog post.`);\n            }\n        },\n        async created() {\n            const postId = this.$route.params.id;\n            if (postId) {\n                await this.setIsEdit(true); // Set isEdit in Vuex\n                await this.getBlogPost(postId);\n            } else {\n                await this.setIsEdit(false); // Set isEdit to false for a new post\n            }\n        },\n    }\n};\n</script>\n\n\n<style scoped>\n.container {\n    background-color:#c2ecd9;\n    padding: 2rem;\n    border-radius: 20px;\n    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n    width: 300px;\n    margin: 0 auto;\n}\n\nh1 {\n    text-align: center;\n    color: #333;\n    margin-bottom: 1.5rem;\n}\n\ninput, textarea {\n    width: 100%;\n    padding: 0.5rem;\n    border: 1px solid #ddd;\n    border-radius: 4px;\n    font-size: 1rem;\n}\n\nlabel {\n    display: block;\n    margin-bottom: 0.5rem;\n    color: #000000;\n    font-size: 1.2rem;\n}\n\nbutton {\n    width: 100%;\n    padding: 0.75rem;\n    background-color: #1877f2;\n    color: #fff;\n    border: none;\n    border-radius: 4px;\n    font-size: 1rem;\n    cursor: pointer;\n    transition: background-color 0.3s ease;\n}\n\nbutton:hover {\n    background-color: #00935b;\n}\n\n.text-danger {\n    color: red;\n    font-size: 18px;\n    font-weight: bold;\n    margin-bottom: 15px;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}